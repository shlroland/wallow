{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ConfigFile",
  "description": "映射 config.toml 文件内容的嵌套结构体",
  "type": "object",
  "properties": {
    "common": {
      "default": {
        "search": {
          "categories": "111",
          "purity": "100",
          "query": null,
          "resolution": "3840x2160",
          "sorting": "random"
        },
        "wallpaper_dir": null
      },
      "allOf": [
        {
          "$ref": "#/definitions/CommonConfig"
        }
      ]
    },
    "source": {
      "default": {
        "wallhaven": {
          "api_key": null
        }
      },
      "allOf": [
        {
          "$ref": "#/definitions/SourceConfigs"
        }
      ]
    }
  },
  "definitions": {
    "CommonConfig": {
      "type": "object",
      "properties": {
        "search": {
          "description": "默认搜索参数",
          "default": {
            "categories": "111",
            "purity": "100",
            "query": null,
            "resolution": "3840x2160",
            "sorting": "random"
          },
          "allOf": [
            {
              "$ref": "#/definitions/SearchDefaults"
            }
          ]
        },
        "wallpaper_dir": {
          "description": "壁纸保存根目录 (支持绝对路径，相对路径则相对于 $HOME)",
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SearchDefaults": {
      "type": "object",
      "properties": {
        "categories": {
          "default": "111",
          "type": "string"
        },
        "purity": {
          "default": "100",
          "type": "string"
        },
        "query": {
          "description": "默认搜索关键词",
          "default": null,
          "type": [
            "string",
            "null"
          ]
        },
        "resolution": {
          "default": "3840x2160",
          "type": "string"
        },
        "sorting": {
          "default": "random",
          "type": "string"
        }
      }
    },
    "SourceConfigs": {
      "type": "object",
      "properties": {
        "wallhaven": {
          "default": {
            "api_key": null
          },
          "allOf": [
            {
              "$ref": "#/definitions/WallhavenConfig"
            }
          ]
        }
      }
    },
    "WallhavenConfig": {
      "type": "object",
      "properties": {
        "api_key": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    }
  }
}
